<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>–ü—É–∑—ã—Ä–∏–∫–∏</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: transparent;
    }
    #bubble-extension {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      pointer-events: auto;
    }
  </style>
</head>
<body>
  <div id="bubble-extension"></div>

  <script>
    (function() {
      const root = document.getElementById('bubble-extension');
      const urlParams = new URLSearchParams(window.location.search);
      const tasks = [];
      let taskCount = 0;

      for (let i = 1; i <= 50; i++) {
        const val = urlParams.get(`task${i}`);
        if (val) {
          tasks.push(val);
        }
      }

      taskCount = tasks.length;

      const counter = document.createElement('div');
      counter.innerHTML = `ü´ß <strong>0 / ${taskCount}</strong>`;
      Object.assign(counter.style, {
        position: 'absolute',
        top: '20px',
        left: '20px',
        background: 'linear-gradient(135deg, #f6f9fc, #dff9fb)',
        padding: '10px 16px',
        borderRadius: '12px',
        fontFamily: 'sans-serif',
        fontSize: '18px',
        color: '#2d3436',
        boxShadow: '0 4px 12px rgba(0,0,0,0.1)',
        zIndex: 300,
        pointerEvents: 'none'
      });
      root.appendChild(counter);

      let popped = 0;
      let finalShown = false;
      const bubbles = [];

      for (let i = 0; i < taskCount; i++) {
        const el = document.createElement('img');
        el.src = urlParams.get('bubbleImg') || "https://media.tenor.com/mqvTrVZEMxIAAAAi/bubble-bfdi.gif";
        Object.assign(el.style, {
          position: 'absolute',
          width: '80px',
          height: '80px',
          opacity: '0.7',
          pointerEvents: 'auto',
          cursor: 'pointer',
          zIndex: 100
        });

        const maxW = window.innerWidth - 80;
        const maxH = window.innerHeight - 80;
        el.style.left = Math.random() * maxW + 'px';
        el.style.top = Math.random() * maxH + 'px';

        const dx = (Math.random()*2 - 1) * 1.5;
        const dy = (Math.random()*2 - 1) * 1.5;
        const bubble = { el, dx, dy, id: i };
        bubbles.push(b
